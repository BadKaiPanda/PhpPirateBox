###########################################################################
# PirateBox v0.2-4 (with Chat)
# tar.gz that installs Debian Squeeze pre-configured with PirateBox to a USB 2.0 drive 
# for use with the Seagate Dockstar
# (C) 2011, David Darts, daviddarts@gmail.com
#
# Released under GPLv2, see http://www.gnu.org/licenses/gpl-2.0.html

OVERVIEW:
    This version of PirateBox comes with a shoutbox interface that facilitates anonymous chat. 
    Like the original version, it also includes a simple file sharing interface. 
    NOTE: the shoutbox is based on JWC's PyShoutOut  http://jwcxz.com/projects/pyshoutout/ 
    The shoutbox files are stored in the /chat directory
    
PLEASE HELP:
  - This version needs testing. Please provide feedback on the PirateBox Forum:
    http://forum.daviddarts.com  

REQUIREMENTS:
  - USB 2.0 Drive
  - Seagate Dockstar
  - Wireless router that supports WRT firmware (DD-WRT, OpenWrt, etc)
  - Computer running Linux or Linux live CD (e.g. Ubuntu Live CD) 

PRE-INSTALL (THIS STEP ONLY NEEDED FOR "FRESH" DOCKSTARS):
  - NOTE: This package has only been tested on a Dockstar that was previously 
    modified using Jeff Doozan's script to install Debian on a USB drive connected to 
    the Dockstar. http://jeff.doozan.com/debian/ 
    It has NOT been tested on a "fresh" Dockstar with the original uboot loader still installed. 
    If you are using a "fresh" Dockstar, it "should" be possible to use Jeff's uboot script to install 
    an unlocked bootloader on your device that supports multiple boot options,
    including booting directly from a USB drive. http://jeff.doozan.com/debian/uboot/
  - First remove any drives from the Dockstar and connect it to your router/gateway and 
    find its IP Address
  - SSH into the device:
        ssh root@IP_Address_Of_Dockstar
    NOTE: the Dockstar password is 'stxadmin' on Seagate branded devices and 'ceadmin' 
    on Pogoplug devices
  - Install the unlocked bootloader:
        cd /tmp
        wget http://jeff.doozan.com/debian/uboot/install_uboot_mtd0.sh
        chmod +x install_uboot_mtd0.sh
        ./install_uboot_mtd0.sh

INSTALL:
  - Format USB drive with 3 partitions:
	ext2 (minimum 500MB) (label: piratebox)
	swap (minimum 256MB) (no label)
  	FAT32 (label: share)
    NOTE: I recommend using GParted
    http://gparted.sourceforge.net
  - On Ubuntu, you can install with:
       sudo apt-get install gparted      
  - You can create and run a live CD or USB version of GParted. You can also use a Live Ubuntu CD 
    which comes with GParted pre-installed.
  - Mount USB drive on your computer
  - Download tar.gz file to your computer
        wget --no-check-certificate https://github.com/downloads/daviddarts/PirateBox/piratebox_0.2-4.tar.gz
  - Become super user:
	sudo su
  - Uncompress into the ext2 partition on the USB drive:  
	tar xvpfz piratebox_0.2-4.tar.gz --strip-components 1 -C /media/piratebox
  - After copying is complete, exit super user:
	exit
  - Navigate to the FAT32 partition on your USB Drive
	cd /media/share
  - Create "piratebox" directory
	mkdir piratebox  
  - Navigate to piratebox directory
	cd /media/share/piratebox
  - Add the following three files to the piratebox directory
	wget http://daviddarts.com/piratebox/.READ.ME.htm
	wget http://daviddarts.com/piratebox/.BACK.TO.MENU.htm
        wget http://daviddarts.com/piratebox/piratebox-logo.png
  - Unmount USB Drive - Important: allow the system to "write" any extra data 
    to the drive first before unplugging (be patient!)
 
USAGE:
 - Connect USB Drive to Dockstar and the Dockstart to your 
   DD-WRT router - see DIY Tutorial 2 on the wiki for more info: 
   http://wiki.daviddarts.com/PirateBox_DIY
  - Open a web browser and navigate to any web page - you should be redirected to 
   the main PirateBox menu page. Begin chatting and/or sharing files.
   NOTE: The hostname for the system is piratebox and the default password is root

REFERENCES:
  - The PirateBox project:
    http://wiki.daviddarts.com/PirateBox_DIY
  - The PirateBox forum:
    http://forum.daviddarts.com   
  - Jeff Doozan's "Unlocking your Dockstar, GoFlex, or Pogoplug" site
    http://jeff.doozan.com/debian
 - JWC's PyShoutOut
   http://jwcxz.com/projects/pyshoutout/ 
 - Debian Linux:
    http://www.debian.org
